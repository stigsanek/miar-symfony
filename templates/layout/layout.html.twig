{% extends 'base.html.twig' %}

{% block body %}
	{# Header start #}
	<header class="fixed-top">
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow">
			<span class="navbar-brand mb-0 h1">МиАР</span>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#menu" aria-controls="menu" aria-expanded="false" aria-label="Переключатель навигации"></button>
			<div class="collapse navbar-collapse" id="menu">
				<ul class="navbar-nav">
					<li class="nav-item dropdown{% block nav_database %}{% endblock %}">
						<a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown">База данных</a>
						<div class="dropdown-menu">
							<a class="dropdown-item" href="/plots">Земельные участки</a>
							<a class="dropdown-item" href="/buildings">Объекты капитального строительства</a>
						</div>
					</li>
					{% if not is_granted('ROLE_GUEST') %}
						<li class="nav-item dropdown{% block nav_new %}{% endblock %}">
							<a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown">Добавить объект</a>
							<div class="dropdown-menu">
								<a class="dropdown-item" href="/plots/new">Земельный участок</a>
								<a class="dropdown-item" href="/buildings/new">Объект капитального строительства</a>
							</div>
						</li>
					{% endif %}
					{% if is_granted('ROLE_ADMIN') %}
						<li class="nav-item{% block nav_admin %}{% endblock %}">
							<a class="nav-link" href="/admin">Панель администратора</a>
						</li>
					{% endif %}
				</ul>
				<ul class="navbar-nav ml-auto">
					<li class="nav-item{% block nav_profile %}{% endblock %}">
						<a class="nav-link" href="/profile">{{ app.user.username }}</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="/logout">Выйти</a>
					</li>
				</ul>
			</div>
		</nav>
	</header>
	{# Header end #}
	{# Main start #}
	<main class="mt-4 mb-4 pt-5">
		<div class="container-fluid">
			{# Alert start #}
			{% for label, messages in app.flashes %}
				{% for message in messages %}
					<div class="alert alert-{{ label }} alert-dismissible fade show" role="alert">
						<p class="mb-0">{{ message }}</p>
						<button type="button" class="close" data-dismiss="alert" aria-label="Закрыть">
							<svg class="fill-alert-{{ label }}" style="width: 1rem; height: 1rem;">
								<use xlink:href="#svg-times"></use>
							</svg>
						</button>
					</div>
				{% endfor %}
			{% endfor %}
			{# Alert end #}
			{# Content start #}
			{% block content %}{% endblock %}
			{# Content end #}
		</div>
	</main>
	{# Main end #}
	{# Footer start #}
	<footer class="footer mt-auto">
		<div class="container-fluid">
			<div class="row">
				<div class="col-12 col-md-auto mr-auto">
					<p class="text-muted">{{ include('partials/_copy.html.twig') }}</p>
				</div>
				<div class="col-12 col-md-auto">
					<p class="text-muted">{{ include('partials/_version.html.twig') }}</p>
				</div>
			</div>
		</div>
	</footer>
	{# Footer end #}
{% endblock %}
